{% extends "base_jinja.html" %}

{% block title %} {{ titulo }} {% endblock title %}

{% block stylesheets %}
{{ super() }}

<style>
    .mytex {
        min-width: 80px !important;
    }

    span {
        display: inline-block;
    }
</style>
{% endblock stylesheets %}

{% block content %}
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            IEU:
            <small>{{ titulo }}</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Resumen LOEU</a></li>
            <li class="active">{{ titulo }}</li>
        </ol>
    </section>

    <!-- Main content -->
    <section class="content">
        {% if get_messages(request) %}
        {% for message in get_messages(request) %}
        <div class="alert alert-{{ message.tags }} alert-dismissible">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            {% if message.tags == 'error' %}
            <h4><i class="icon fa fa-ban"></i> ¡Alerta!</h4>
            {% elif message.tags == 'warning' %}
            <h4><i class="icon fa fa-warning"></i> ¡Cuidado!</h4>
            {% elif message.tags == 'success' %}
            <h4><i class="icon fa fa-check"></i> ¡Exito!</h4>
            {% elif message.tags == 'info' %}
            <h4><i class="icon fa fa-info"></i> ¡Atención!</h4>
            {% endif %}
            {{ message }}
        </div>
        {% endfor %}
        {% endif %}
        <div class="row">
            <!-- Left col -->
            <div class="col-md-9">
                <div class="row">
                    <div class="col-md-4">
                        <div class="box box-default">
                            <div class="box-header with-border">
                                <h3 class="box-title">Programas Académicos</h3>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i
                                            class="fa fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-box-tool" data-widget="remove"><i
                                            class="fa fa-times"></i></button>
                                </div>
                            </div>
                            <div class="box-body">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div id="canvas-holder">
                                            <canvas id="programas_1"></canvas>
                                        </div>
                                        <!-- ./chart-responsive -->
                                    </div>
                                    <!-- /.col -->
                                </div>
                                <!-- /.row -->
                            </div>
                            <!-- /.box-body -->
                        </div>
                        <!-- /.box -->
                    </div>
                </div>
            </div>
            <!-- /.col -->
            <div class="col-md-3">
            </div>
            <!-- /.col -->
        </div>
        <!-- /.row -->
    </section>
    <!-- /.content -->
    <div id="popup" class="modal fade" role="dialog"></div>
</div>
<!-- /.content-wrapper -->
{% endblock content %}

{% block javascripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
<script src="{{ static('bower_components/chart.js/utils.js') }}"></script>
<script>
    var randomScalingFactor = function () {
        return Math.round(Math.random() * 100);
    };
    var config = {
        type: 'doughnut',
        data: {
            datasets: [{
                data: Object.values(JSON.parse('{{ programas | safe }}')),
                backgroundColor: [
                    window.chartColors.red,
                    window.chartColors.blue,
                    window.chartColors.orange,
                    window.chartColors.green,
                    window.chartColors.yellow,
                ],
                label: 'Dataset 1'
            }],
            labels: Object.keys(JSON.parse('{{ programas | safe }}')),
        },
        options: {
            responsive: true,
            legend: {
                position: 'left',
                labels: {
                    padding: 5,
                    usePointStyle: true,
                }
            },
            animation: {
                animateScale: true,
                animateRotate: true
            }
        }
    };

    window.onload = function () {
        var ctx = document.getElementById('programas_1').getContext('2d');
        window.myDoughnut = new Chart(ctx, config);
    };
</script>
{% endblock javascripts %}
